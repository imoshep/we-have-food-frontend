(this["webpackJsonpwe-have-food"]=this["webpackJsonpwe-have-food"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(25),s=a.n(o),c=(a(70),a(4)),l=a(5),i=a(7),u=a(6),m=(a(71),a(10)),d=a(9),f=(a(72),a(1)),p=a.n(f),h=a(3),v=a(38),b=a.n(v);function g(){return localStorage.getItem("token")}var E=b.a.create({headers:{"x-auth-token":g()}});E.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=403&&d.b.error("An unexpected error occured. Please try again later."),Promise.reject(e)}));var _={get:E.get,post:E.post,put:E.put,patch:E.patch,delete:E.delete},y=a(11),x=a(60),w=a.n(x);function k(){try{var e=g();return w()(e)}catch(t){return t}}function j(e){return O.apply(this,arguments)}function O(){return(O=Object(h.a)(p.a.mark((function e(t){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_.get("".concat(y.a,"/users?id=").concat(t));case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{message:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05de\u05e9\u05ea\u05de\u05e9",error:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function C(e,t){return S.apply(this,arguments)}function S(){return(S=Object(h.a)(p.a.mark((function e(t,a){var r,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post("".concat(y.a,"/auth"),{email:t,password:a});case 2:return r=e.sent,n=r.data,localStorage.setItem("token",n.token),e.abrupt("return",n.token);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t,a,r){return N.apply(this,arguments)}function N(){return(N=Object(h.a)(p.a.mark((function e(t,a,r,n){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.post("".concat(y.a,"/users"),{name:t,email:a,password:r,phone:n}).catch((function(e){return e.response}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e){return _.patch("".concat(y.a,"/users/favorites"),e).catch((function(e){return e.response}))}function T(e){return console.log("running from userService"),_.post("".concat(y.a,"/users/favorites"),e).catch((function(e){return e.response}))}var I={getCurrentUser:k,getUserInfo:j,login:C,logout:function(){localStorage.removeItem("token")},signup:F,updateFavorites:D,removeFavorites:T},B=a(33),L=a(23),A=a(63),U=a(20),H=function(e){e.path;var t=e.component,a=e.render,r=Object(U.a)(e,["path","component","render"]),o=I.getCurrentUser();return n.a.createElement(m.b,Object.assign({},r,{render:function(e){return o._id?t?n.a.createElement(t,e):a(e):n.a.createElement(m.a,{to:{pathname:"/user/login",state:{from:e.location}}})}}))},M=a(34),W=a(29),q=a(31),P=function(e){var t=e.name,a=e.type,r=e.label,o=e.error,s=e.style,c=Object(U.a)(e,["name","type","label","error","style"]);return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:t,style:s.label},r),n.a.createElement("br",null),n.a.createElement("input",Object.assign({},c,{type:a,className:"form-control",id:t,name:t,style:s.input})),o&&n.a.createElement("span",{style:s.errorMessage,className:"text-danger"},o))},R=a(8),z=a.n(R),J=function(e){var t=e.name,a=e.label,r=e.formID,o=e.rowsNum,s=e.error,c=e.style,l=Object(U.a)(e,["name","label","formID","rowsNum","error","style"]);return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:t,style:c.label},a),n.a.createElement("br",null),n.a.createElement("textarea",Object.assign({},l,{className:"form-control",form:r,id:t,name:t,rows:o,style:c.input})),s&&n.a.createElement("span",{style:c.errorMessage,className:"text-danger"},s))},G=function(e){var t=e.name,a=e.label,r=e.listID,o=e.listArray,s=e.value,c=e.error,l=e.style,i=Object(U.a)(e,["name","label","listID","listArray","value","error","style"]);return n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:t,style:l.label},a),n.a.createElement("br",null),n.a.createElement("input",{style:{display:"none"}}),n.a.createElement("input",Object.assign({},i,{autoComplete:"off",type:"text",className:"form-control",list:r,id:t,name:t,value:s,style:l.input})),n.a.createElement("datalist",{id:r},o&&o.map((function(e,t){return n.a.createElement("option",{key:t+"-"+e,value:e},e)}))),c&&n.a.createElement("span",{style:l.errorMessage,className:"text-danger"},c))},K=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={data:{},errors:{}},e.wrdlimit=function(e){for(var t=e.nextSibling.firstElementChild;t;)t.value.startsWith(e.value)?t.removeAttribute("disabled"):t.setAttribute("disabled",!0),t=t.nextElementSibling},e.handleChange=function(t){var a=t.currentTarget,r=Object(q.a)({},e.state.errors),n=e.validateProperty(a);n?r[a.name]=n:delete r[a.name];var o=Object(q.a)({},e.state.data);a.list&&e.wrdlimit(a),o[a.name]=a.value,e.setState({data:o,errors:r})},e.handleUpload=function(t){var a=t.currentTarget,r=a.files[0],n=Object(q.a)({},e.state.errors),o=Object(q.a)({},e.state.data);if(r){var s=e.validateUpload(r,"image");s?(n[a.name]=s,o[a.name]=null):(delete n[a.name],o[a.name]=r)}else delete n[a.name];e.setState({data:o,errors:n})},e.handleSubmit=function(t){t.preventDefault();var a=e.validateForm();e.setState({errors:a||{}}),a||e.doSubmit()},e.handleClear=function(t){t.preventDefault();var a=Object(q.a)({},e.state),r=a.data,n=a.errors;r={foodTitle:"",foodDesc:"",foodImage:null,foodLocation:""},n={},a.form.reset(),e.setState({data:r,errors:n})},e.inputStyle={label:{marginTop:"1rem"},input:{backgroundColor:"white",padding:".5rem",borderRadius:"13px",border:"3px inset grey",marginBlockStart:".25rem",width:"100%",fontFamily:"sans-serif"},errorMessage:{color:"red",display:"block"}},e}return Object(l.a)(a,[{key:"validateForm",value:function(){var e=z.a.validate(this.state.data,this.schema,{abortEarly:!1}).error;if(!e)return!1;var t,a={},r=Object(W.a)(e.details);try{for(r.s();!(t=r.n()).done;){var n=t.value;a[n.path[0]]=n.message}}catch(o){r.e(o)}finally{r.f()}return!0}},{key:"validateProperty",value:function(e){var t=e.name,a=e.value;if("passwordRepeat"===t)return null;var r=Object(M.a)({},t,a),n=Object(M.a)({},t,this.schema[t]),o=z.a.validate(r,n).error;return o?o.details[0].message:null}},{key:"validateUpload",value:function(e,t){var a;return"image"===t&&(e.type.startsWith("image")&&/\.(jpe?g|png|gif)$/i.test(e.name)||(a="\u05d9\u05e9 \u05dc\u05d4\u05e2\u05dc\u05d5\u05ea \u05e7\u05d5\u05d1\u05e5 \u05ea\u05de\u05d5\u05e0\u05d4 \u05d1\u05dc\u05d1\u05d3")),a}},{key:"renderInput",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"text",r=this.state,o=r.data,s=r.errors;return n.a.createElement(P,{onChange:this.handleChange,type:a,name:e,label:t,value:o[e],error:s[e],style:this.inputStyle})}},{key:"renderTextArea",value:function(e,t,a,r){var o=this.state,s=o.data,c=o.errors;return n.a.createElement(J,{onChange:this.handleChange,name:e,formID:a,rowsNum:r,label:t,value:s[e],error:c[e],style:this.inputStyle})}},{key:"renderDatalist",value:function(e,t,a,r){var o=this,s=this.state,c=s.data,l=s.errors;return n.a.createElement(G,{onMouseDown:function(){c[e]="",console.log("clicked"),o.setState({data:c})},onChange:this.handleChange,name:e,listID:t,label:a,listArray:r,value:c[e],error:l[e],style:this.inputStyle})}},{key:"renderUpload",value:function(e,t,a){var r=this.state.errors;return n.a.createElement(P,{type:"file",onChange:this.handleUpload,name:e,label:t,accept:a,error:r[e],style:this.inputStyle})}},{key:"renderSubmitButton",value:function(e,t){return n.a.createElement("button",{disabled:this.validateForm(),type:"submit",className:t},e)}}]),a}(r.Component),Y=a(12),$=(a(98),function(e){var t=e.to,a=e.color,r=e.style,o=e.text,s=Object(U.a)(e,["to","color","style","text"]);return n.a.createElement(Y.b,Object.assign({},s,{to:t,className:"button ".concat(a),style:r}),o)}),Q=a(46),V=a.n(Q),X=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={data:{email:"",password:""},errors:{}},e.schema={email:z.a.string().required().email().label("Email").error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d4\u05d6\u05d9\u05df \u05db\u05ea\u05d5\u05d1\u05ea \u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05ea\u05e7\u05e0\u05d9\u05ea"}})),password:z.a.string().required().min(6).label("Password").error((function(){return{message:"\u05e9\u05d9\u05e9\u05d4 \u05ea\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea"}}))},e.doSubmit=Object(h.a)(p.a.mark((function t(){var a,r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.data,r=a.email,n=a.password,t.prev=1,t.next=4,I.login(r,n);case 4:window.location="/",t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),t.t0.response&&400===t.t0.response.status&&e.setState({errors:{password:t.t0.response.data}});case 10:case"end":return t.stop()}}),t,null,[[1,7]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:V.a.login},n.a.createElement("div",{className:V.a.form},n.a.createElement("h2",null,"\u05d4\u05ea\u05d7\u05d1\u05e8/\u05d9"),n.a.createElement("form",{id:"login-form",onSubmit:this.handleSubmit,action:"",method:"post"},this.renderInput("email","\u05db\u05ea\u05d5\u05d1\u05ea \u05d0\u05d9\u05de\u05d9\u05d9\u05dc","email"),this.renderInput("password","\u05e1\u05d9\u05e1\u05de\u05d0","password"),this.renderSubmitButton("\u05d9\u05e9 \u05dc\u05d9 \u05d0\u05d5\u05db\u05dc","button green"),n.a.createElement("br",null))),n.a.createElement($,{to:"/user/signup",text:"\u05e2\u05d5\u05d3 \u05d0\u05d9\u05df \u05dc\u05da \u05d7\u05e9\u05d1\u05d5\u05df?",color:"mustard"}))}}]),a}(K),Z=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){I.logout(),window.location.href="/user/login"}},{key:"render",value:function(){return null}}]),a}(r.Component),ee=a(47),te=a.n(ee),ae=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={data:{name:"",email:"",password:"",passwordRepeat:"",phone:""},errors:{}},e.schema={name:z.a.string().required().min(2).max(255).label("Name").error((function(){return{message:"\u05e9\u05e0\u05d9 \u05ea\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea"}})),email:z.a.string().required().email().label("Email").error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d4\u05d6\u05d9\u05df \u05db\u05ea\u05d5\u05d1\u05ea \u05d0\u05d9\u05de\u05d9\u05d9\u05dc \u05ea\u05e7\u05e0\u05d9\u05ea"}})),password:z.a.string().required().min(6).label("Password").error((function(){return{message:"\u05e9\u05d9\u05e9\u05d4 \u05ea\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea"}})),passwordRepeat:z.a.string().required().error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d4\u05e7\u05dc\u05d9\u05d3 \u05d0\u05d5\u05ea\u05d4 \u05e1\u05d9\u05e1\u05de\u05d0"}})),phone:z.a.string().regex(/^0[2-9]\d{7,8}$/).allow("").error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d4\u05e7\u05dc\u05d9\u05d3 \u05de\u05e1\u05e4\u05e8 \u05d8\u05dc\u05e4\u05d5\u05df \u05ea\u05e7\u05e0\u05d9"}}))},e.doSubmit=Object(h.a)(p.a.mark((function t(){var a,r,n,o,s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state.data,r=a.name,n=a.email,o=a.password,s=a.passwordRepeat,c=a.phone,o===s){t.next=4;break}return e.setState({errors:{passwordRepeat:"\u05d9\u05e9 \u05dc\u05d4\u05e7\u05dc\u05d9\u05d3 \u05d0\u05d5\u05ea\u05d4 \u05d4\u05e1\u05d9\u05e1\u05de\u05d0"}}),t.abrupt("return");case 4:return t.prev=4,t.next=7,F(r,n,o,c);case 7:return t.next=9,C(n,o);case 9:Object(d.b)("You were added to the system. Please log in."),window.location="/",t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),t.t0.response&&400===t.t0.response.status&&e.setState({errors:{password:t.t0.response.data}});case 16:case"end":return t.stop()}}),t,null,[[4,13]])}))),e}return Object(l.a)(a,[{key:"render",value:function(){return k()._id?n.a.createElement(m.a,{to:"/"}):n.a.createElement("div",{className:te.a.signup},n.a.createElement("div",{className:te.a.form},n.a.createElement("h2",null,"\u05d4\u05e8\u05e9\u05de\u05d4"),n.a.createElement("form",{id:"signup-form",onSubmit:this.handleSubmit,action:"",method:"post"},this.renderInput("name","\u05e9\u05dd:"),this.renderInput("email","\u05db\u05ea\u05d5\u05d1\u05ea \u05d0\u05d9\u05de\u05d9\u05d9\u05dc:","email"),this.renderInput("password","\u05e1\u05d9\u05e1\u05de\u05d0:","password"),this.renderInput("passwordRepeat","\u05e1\u05d9\u05e1\u05de\u05d0 \u05d1\u05e9\u05e0\u05d9\u05ea:","password"),this.renderInput("phone","\u05de\u05e1' \u05d8\u05dc\u05e4\u05d5\u05df:","tel"),n.a.createElement("br",null),this.renderSubmitButton("\u05d1\u05d5\u05d0\u05d5 \u05e0\u05ea\u05d7\u05d9\u05dc","button green"))))}}]),a}(K),re=function(){return n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("p",null,"We Have Food! \xa9 ",(new Date).getFullYear()),n.a.createElement("p",{style:{fontSize:"0.8rem"}},"Favicon made by",n.a.createElement("a",{href:"https://www.flaticon.com/authors/freepik",title:"Freepik"},"Freepik"),"from",n.a.createElement("a",{href:"https://www.flaticon.com/",title:"Flaticon"},"www.flaticon.com")))},ne=a(21),oe=a(16),se=a.n(oe),ce=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={},e.closeCollapseList=function(){e.collapseList.style.maxHeight=null},e.toggleCollapseList=function(){var t=e.collapseList.style;t.maxHeight?t.maxHeight=null:t.maxHeight="15rem"},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.collapseList=document.getElementById("collapse-list")}},{key:"render",value:function(){var e=this.props.user;return n.a.createElement("nav",{className:se.a.navbar,id:"navbar"},n.a.createElement("ul",{className:se.a.topList},n.a.createElement("li",{className:"".concat(se.a.navlink," ").concat(se.a.burger),onClick:this.toggleCollapseList},n.a.createElement(ne.a,{icon:L.a})),n.a.createElement("li",{className:se.a.navlink},n.a.createElement(Y.c,{to:"/",onClick:this.closeCollapseList},n.a.createElement(ne.a,{icon:L.c}))),(null===e||void 0===e?void 0:e._id)?n.a.createElement("span",{className:se.a.topLeft},n.a.createElement("li",{className:se.a.navlink},n.a.createElement(Y.c,{to:"/user/me",onClick:this.closeCollapseList},n.a.createElement(ne.a,{icon:"user-circle"}))),n.a.createElement("li",{className:se.a.navlink},n.a.createElement(Y.c,{to:"/user/logout",onClick:this.closeCollapseList},n.a.createElement(ne.a,{icon:"people-arrows"})))):n.a.createElement("li",{className:"".concat(se.a.navlink," ").concat(se.a.topLeft)},n.a.createElement(Y.c,{to:"/user/login",onClick:this.closeCollapseList},n.a.createElement(ne.a,{icon:L.g})))),n.a.createElement("ul",{className:se.a.collapseList,id:"collapse-list"},n.a.createElement("li",{className:se.a.navlink},n.a.createElement(Y.c,{to:"/food/search",onClick:this.closeCollapseList},"\u05dc\u05de\u05e6\u05d5\u05d0 \u05d0\u05d5\u05db\u05dc")),n.a.createElement("li",{className:se.a.navlink},n.a.createElement(Y.c,{to:"/user/me",onClick:this.closeCollapseList},"\u05d4\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc \u05e9\u05dc\u05d9")),n.a.createElement("li",{className:se.a.navlink},n.a.createElement(Y.c,{to:"/food/add",onClick:this.closeCollapseList},"\u05e9\u05ea\u05e3 \u05d0\u05d5\u05db\u05dc"))))}}]),a}(r.Component),le=a(41),ie=a.n(le),ue=a(30),me=a.n(ue);function de(e){var t,a=new FormData(e),r=Object(W.a)(a);try{for(r.s();!(t=r.n()).done;){var n=t.value;console.log(n)}}catch(o){r.e(o)}finally{r.f()}return _.post("".concat(y.a,"/food"),a).catch((function(e){return console.log(e.response.data),e.response.data}))}function fe(e){return _.delete("".concat(y.a,"/food/").concat(e))}function pe(e,t){var a=new FormData(t);return _.put("".concat(y.a,"/food/").concat(e),a).catch((function(e){return e.response.data}))}function he(e){return _.get("".concat(y.a,"/food?_id=").concat(e)).catch((function(e){return console.log(e.response.data),e.response.data}))}function ve(e){return _.get("".concat(y.a,"/food?foodCity=").concat(e)).catch((function(e){return console.log(e.response.data),e.response.data}))}function be(e){return _.get("".concat(y.a,"/food?user_id=").concat(e)).catch((function(e){return console.log(e.response.data),e.response.data}))}var ge=a(64),Ee=function(){var e=Object(h.a)(p.a.mark((function e(){var t,a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[],a=b.a.create({baseURL:"https://data.gov.il",params:{resource_id:"5c78e9fa-c2e2-4771-93ff-7f400a12f7ba"},headers:{common:{}}}),r=0;case 3:if(!(r<13)){e.next=9;break}return e.next=6,a.get("/api/3/action/datastore_search",{params:{resource_id:"5c78e9fa-c2e2-4771-93ff-7f400a12f7ba",offset:100*r}}).then((function(e){t.push.apply(t,Object(ge.a)(e.data.result.records))})).catch((function(e){console.log(e.message)}));case 6:r++,e.next=3;break;case 9:return e.abrupt("return",t);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(h.a)(p.a.mark((function e(){var t,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:return t=e.sent,a={names:[]},t.forEach((function(e,t){a.names.push(e["\u05e9\u05dd_\u05d9\u05e9\u05d5\u05d1"].trim())})),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={data:{foodTitle:"",foodDesc:"",foodCity:""},errors:{},cities:{},form:null},e.schema={foodTitle:z.a.string().required().min(2).max(255).label("Food Title").error((function(){return{message:"\u05e9\u05e0\u05d9 \u05ea\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea"}})),foodDesc:z.a.string().required().min(2).max(1024).label("Food Description").error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d4\u05d6\u05d9\u05df \u05ea\u05d9\u05d0\u05d5\u05e8 "}})),foodCity:z.a.string().required().min(2).max(255).label("Food City").error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d1\u05d7\u05d5\u05e8 \u05e2\u05d9\u05e8"}})),foodImage:z.a.any()},e.logState=function(){var t=document.forms.namedItem("add-food-form");console.log(t),console.dir(e.state)},e.getCities=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e();case 3:return t=e.sent,e.abrupt("return",{list:t,error:null});case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{list:null,error:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),e.handleClear=function(){var t=e.state.data;t={foodTitle:"",foodDesc:"",foodCity:""},e.setState({data:t})},e.doSubmit=Object(h.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=document.forms.namedItem("add-food-form"),t.next=3,de(a);case 3:d.b.success("\u05ea\u05d5\u05d3\u05d4 \u05e2\u05dc \u05d4\u05e9\u05d9\u05ea\u05d5\u05e3!"),e.props.history.replace("/");case 5:case"end":return t.stop()}}),t)}))),e.componentDidMount=Object(h.a)(p.a.mark((function t(){var a,r,n,o,s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.cities,n=a.form,t.next=3,e.getCities();case 3:o=t.sent,s=o.list,c=o.error,s?r=s:console.log(c),n=document.getElementById("add-food-form"),e.setState({cities:r,form:n});case 9:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.cities;return n.a.createElement("div",{className:ie.a.addFood},n.a.createElement("div",{className:ie.a.form},n.a.createElement("h3",null,"\u05d0\u05d9\u05d6\u05d4 \u05d0\u05d5\u05db\u05dc \u05d9\u05e9 \u05dc\u05da?"),n.a.createElement("form",{id:"add-food-form",name:"add-food-form",onSubmit:this.handleSubmit,action:"",method:"POST",autoComplete:"off",encType:"multipart/form-data"},this.renderInput("foodTitle","* \u05d0\u05d9\u05d6\u05d4 \u05d0\u05d5\u05db\u05dc?"),this.renderTextArea("foodDesc","* \u05e2\u05d5\u05d3 \u05e2\u05dc \u05d4\u05d0\u05d5\u05db\u05dc:","add-food-form","5"),this.renderUpload("foodImage","\u05e8\u05d5\u05e6\u05d4 \u05dc\u05e6\u05e8\u05e3 \u05ea\u05de\u05d5\u05e0\u05d4?","image/*"),e?this.renderDatalist("foodCity","cities","* \u05d1\u05d0\u05d9\u05d6\u05d5 \u05e2\u05d9\u05e8?",e.names):this.renderInput("foodCity","* \u05d1\u05d0\u05d9\u05d6\u05d5 \u05e2\u05d9\u05e8?"),n.a.createElement("div",{className:ie.a.formButtons},this.renderSubmitButton("\u05e9\u05d9\u05ea\u05d5\u05e3 \u05de\u05d6\u05d5\u05df","submit button green"),n.a.createElement("span",{onClick:this.handleClear,className:"button red"},"\u05e0\u05d9\u05e7\u05d5\u05d9"))),n.a.createElement("div",null,n.a.createElement($,{to:"/",text:"Home",color:"green"}))))}}]),a}(K),xe=a(26),we=a.n(xe),ke=a(62),je=a.n(ke),Oe=a(27),Ce=a.n(Oe),Se=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.rec;return n.a.createElement("div",{className:Ce.a.recommendation},n.a.createElement("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",className:Ce.a.recommendation__link},n.a.createElement("img",{src:e.image,alt:e.title,className:Ce.a.recommendation__image}),n.a.createElement("div",{className:Ce.a.recommendation__text},n.a.createElement("h4",{className:Ce.a.recommendation__heading},e.title),n.a.createElement("p",{className:Ce.a.recommendation__desc},e.desc))))}}]),a}(r.Component),Fe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={recommendations:[{title:"\u05e8\u05d5\u05d1\u05d9\u05df \u05e4\u05d5\u05d3",desc:"\u05de\u05e1\u05e2\u05d3\u05d4 \u05d5\u05e7\u05e4\u05d4 \u05d1\u05e9\u05d5\u05e7 \u05e9\u05dc \u05d7\u05d9\u05e4\u05d4 \u05e9\u05de\u05d1\u05d5\u05e1\u05e1\u05ea \u05db\u05d5\u05dc\u05d4 \u05e2\u05dc \u05de\u05d6\u05d5\u05df \u05de\u05d5\u05e6\u05dc",image:"https://images.unsplash.com/photo-1518675219903-c682c4b16b1d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=80",link:"https://www.facebook.com/robinfood.il/"}]},e.headerStyle={backgroundImage:"url(".concat(je.a,")"),backgroundSize:"cover"},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state.recommendations;return n.a.createElement("div",{className:we.a.container},n.a.createElement("header",{className:we.a.pageHeader,id:"header",style:this.headerStyle},n.a.createElement("h1",{className:we.a.headerText},n.a.createElement("span",{dir:"ltr"},"We Have Food!"),n.a.createElement("br",null),"\u05d9\u05e9 \u05dc\u05e0\u05d5 \u05d0\u05d5\u05db\u05dc!")),n.a.createElement("section",{className:we.a.content},n.a.createElement("div",{className:we.a.content__about},n.a.createElement("p",null,"\u05d4\u05e6\u05dc\u05ea \u05de\u05d6\u05d5\u05df \u05d4\u05d9\u05d0 \u05d5\u05d5\u05d0\u05dc\u05d4 \u05d0\u05d9\u05d6\u05d4 \u05d0\u05d7\u05dc\u05d4 \u05d6\u05d4 \u05db\u05d6\u05d4 \u05d8\u05e2\u05d9\u05dd \u05dc\u05d1\u05e9\u05dc \u05d0\u05d5\u05db\u05dc \u05e9\u05d4\u05d9\u05d4 \u05e0\u05d6\u05e8\u05e7 \u05d5\u05e2\u05d5\u05d3 \u05db\u05dc \u05de\u05d9\u05e0\u05d9 \u05de\u05d9\u05dc\u05d9\u05dd."),n.a.createElement("br",null),n.a.createElement("p",null,"\u05d0\u05dd \u05d9\u05e9 \u05dc\u05db\u05dd \u05d0\u05d5\u05db\u05dc \u05e9\u05d0\u05ea\u05dd \u05db\u05d1\u05e8 \u05dc\u05d0 \u05de\u05ea\u05db\u05d5\u05d5\u05e0\u05d9\u05dd \u05dc\u05d4\u05e9\u05ea\u05de\u05e9 \u05d1\u05d5 - \u05d1\u05d5\u05d0\u05d5 \u05d5\u05ea\u05e8\u05d0\u05d5 \u05d0\u05d9\u05d6\u05d4 \u05db\u05d9\u05e3 \u05d6\u05d4 \u05dc\u05d7\u05dc\u05d5\u05e7 \u05d0\u05d5\u05ea\u05d5 \u05d5\u05dc\u05ea\u05ea \u05d0\u05d5\u05ea\u05d5 \u05dc\u05de\u05d9 \u05e9\u05d9\u05d4\u05e0\u05d4 \u05de\u05de\u05e0\u05d5!")),n.a.createElement("div",{className:we.a.content__addFood},n.a.createElement($,{text:"\u05d9\u05e9 \u05dc\u05d9 \u05d0\u05d5\u05db\u05dc!",to:"/food/add",color:"green",style:{marginBottom:"0.5rem"}}),n.a.createElement($,{text:"\u05d7\u05d9\u05e4\u05d5\u05e9 \u05d0\u05d5\u05db\u05dc",to:"/food/search",color:"mustard"})),n.a.createElement("div",null,n.a.createElement("h3",null,"\u05d4\u05e0\u05d4 \u05e2\u05d5\u05d3 \u05de\u05e7\u05d5\u05de\u05d5\u05ea \u05e9\u05db\u05d3\u05d0\u05d9 \u05dc\u05db\u05dd \u05dc\u05d4\u05e6\u05d9\u05e5 \u05d1\u05d4\u05dd:"),e.length>0&&e.map((function(e,t){return n.a.createElement(Se,{key:t,rec:e})})))))}}]),a}(r.Component),Ne=a(28),De=a.n(Ne),Te=a(40),Ie=a.n(Te),Be=a(48),Le=a.n(Be),Ae=a(15),Ue=a.n(Ae),He=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={isSelected:!1},e.fireFavoritesClick=function(t){t.stopPropagation();var a=e.state.isSelected,r=t.currentTarget.getAttribute("data-food-id");e.props.registerFavorites(r),a=!a,e.setState({isSelected:a})},e}return Object(l.a)(a,[{key:"displayMore",value:function(e){var t=e.currentTarget.nextElementSibling.style;"none"===t.display?t.display="table-row":t.display="none"}},{key:"renderTitle",value:function(e,t){var a=this,r=this.state.isSelected;return n.a.createElement(n.a.Fragment,null,r?n.a.createElement(ne.a,{"data-food-id":e._id,onClick:function(e){return a.fireFavoritesClick(e)},icon:"star"}):n.a.createElement(ne.a,{"data-food-id":e._id,onClick:function(e){return a.fireFavoritesClick(e)},icon:["far","star"]})," \xa0",e.foodTitle)}},{key:"renderImage",value:function(e,t){return n.a.createElement("img",{src:e.foodImage,alt:e.foodTitle,height:t,onClick:function(){return Ue.a.fire({text:e.foodTitle,imageUrl:e.foodImage})}})}},{key:"renderUser",value:function(e){return n.a.createElement("p",null,e.user.name,n.a.createElement("br",null),e.user.phone,n.a.createElement("br",null),e.user.email)}},{key:"render",value:function(){var e=this,t=this.props,a=t.listing,r=t.addToFavorites;return n.a.createElement(Ie.a,{minDeviceWidth:"768px"},(function(t){return t?n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",null,n.a.createElement("td",null,e.renderTitle(a,e.fireFavoritesClick)),n.a.createElement("td",null,a.foodDesc),n.a.createElement("td",null,e.renderImage(a,"150")),n.a.createElement("td",null,e.renderUser(a)))):n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",{onClick:e.displayMore},n.a.createElement("td",null,e.renderTitle(a,r)),n.a.createElement("td",{style:{display:"flex",justifyContent:"space-between",gap:"8px"}},a.foodDesc,n.a.createElement(ne.a,{icon:"caret-down",size:"lg"}))),n.a.createElement("tr",{style:{display:"none"}},n.a.createElement("td",null,e.renderImage(a,"100")),n.a.createElement("td",null,e.renderUser(a))))}))}}]),a}(r.Component),Me=function(e){function t(t){e.registerFavorites(t)}return n.a.createElement(n.a.Fragment,null,n.a.createElement("h4",{className:Le.a.header},"\u05de\u05d6\u05d5\u05df \u05dc\u05de\u05e1\u05d9\u05e8\u05d4 \u05d1",e.array[0].foodCity),n.a.createElement("p",null,"\u05de\u05e6\u05d9\u05d2 \u05e4\u05e8\u05d9\u05d8\u05d9\u05dd \u05e9\u05e4\u05d5\u05e8\u05e1\u05de\u05d5 \u05d1\u05e9\u05d1\u05d5\u05e2 \u05d4\u05d0\u05d7\u05e8\u05d5\u05df \u05d1\u05dc\u05d1\u05d3"),n.a.createElement("table",{className:Le.a.table},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"\u05e9\u05dd"),n.a.createElement("th",null,"\u05ea\u05d9\u05d0\u05d5\u05e8"),n.a.createElement(Ie.a,{minDeviceWidth:"768px"},n.a.createElement("th",null,"\u05ea\u05de\u05d5\u05e0\u05d4"),n.a.createElement("th",null,"\u05de\u05d9 \u05de\u05d5\u05e1\u05e8?")))),n.a.createElement("tbody",null,e.array.map((function(e,a,r){return n.a.createElement(He,{key:e._id,listing:e,registerFavorites:t})})))))},We=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={data:{foodCity:""},errors:{foodCity:""},cities:{},foodList:[],favorites:[]},e.schema={foodCity:z.a.string().min(2).max(255).error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d1\u05d7\u05d5\u05e8 \u05e2\u05d9\u05e8"}}))},e.registerFavoritesFromList=function(t){var a=e.state.favorites;a.includes(t)?a.splice(a.indexOf(t),1):a.push(t),e.setState({favorites:a})},e.sendFavoritesToServer=Object(h.a)(p.a.mark((function t(){var a,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.favorites,t.prev=1,t.next=4,D(a);case 4:(r=t.sent).status>=400?d.b.error(r.data):d.b.success((function(){return n.a.createElement("p",null,"\u05d4\u05d0\u05d5\u05db\u05dc \u05e9\u05d1\u05d7\u05e8\u05ea \u05e0\u05d5\u05e1\u05e3 \u05dc\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd. \u05dc\u05e6\u05e4\u05d9\u05d4 \u05d5\u05e2\u05e8\u05d9\u05db\u05d4 \u05e9\u05dc \u05d4\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd \u05d9\u05e9 \u05dc\u05d4\u05d9\u05db\u05e0\u05e1 \u05dc",n.a.createElement(Y.b,{to:"/user/me"},"\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc \u05d4\u05de\u05e9\u05ea\u05de\u05e9"))})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),d.b.error(t.t0.message);case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.getCities=Object(h.a)(p.a.mark((function t(){var a;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.cities,t.next=3,_e();case 3:a=t.sent,e.setState({cities:a});case 5:case"end":return t.stop()}}),t)}))),e.doSubmit=Object(h.a)(p.a.mark((function t(){var a,r,n,o,s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.data,n=a.foodList,o=a.favorites,o=[],t.prev=2,t.next=5,ve(r.foodCity);case 5:c=t.sent,n=(null===(s=c.data)||void 0===s?void 0:s.length)>0?c.data:"none",t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),d.b.error(t.t0);case 12:if("object"===typeof foodlist&&n.length>0&&n.forEach((function(e){e.foodImage=y.b+e.foodImage.slice(8)})),"object"!==typeof n){t.next=16;break}return t.next=16,Promise.all(n.map(function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t.user_id);case 3:t.user=e.sent,""===t.user&&(t.user={_id:t.user_id,name:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05de\u05e9\u05ea\u05de\u05e9",phone:"",email:""}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),d.b.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 16:e.setState({foodList:n,favorites:o});case 17:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.componentDidMount=function(){e.getCities()},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.cities,a=e.foodList,r=e.data,o=e.favorites;return n.a.createElement("div",{className:De.a.viewFood},n.a.createElement("header",{className:De.a.pageHeader},n.a.createElement("h1",{className:De.a.headerText},"\u05de\u05e6\u05d0\u05d5 \u05d0\u05d5\u05db\u05dc \u05d1\u05e1\u05d1\u05d9\u05d1\u05d4")),n.a.createElement("div",{className:De.a.form},n.a.createElement("form",{autoComplete:"off",name:"search-city",action:"",method:"GET",onSubmit:this.handleSubmit},n.a.createElement("div",{style:{opacity:"0"}}),t.names?this.renderDatalist("foodCity","cities","\u05d7\u05e4\u05e9\u05d5 \u05dc\u05e4\u05d9 \u05e2\u05d9\u05e8",t.names):n.a.createElement("h2",null," \u05e2\u05de\u05d5\u05d3 \u05d1\u05d8\u05e2\u05d9\u05e0\u05d4..."),this.renderSubmitButton("\u05d7\u05d9\u05e4\u05d5\u05e9","".concat(De.a.submit," button green")))),n.a.createElement("div",{className:De.a.foodList},"none"!==a&&a.length>0&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Me,{array:a,registerFavorites:this.registerFavoritesFromList}),o.length>0&&n.a.createElement("span",{className:"button green",onClick:this.sendFavoritesToServer},"\u05d4\u05d5\u05e1\u05e4\u05d4 \u05dc\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd")),"none"===a&&n.a.createElement("p",null,"\u05de\u05e6\u05d8\u05e2\u05e8\u05d9\u05dd, \u05d0\u05d9\u05df \u05db\u05e8\u05d2\u05e2 \u05d0\u05d5\u05db\u05dc \u05dc\u05de\u05e1\u05d9\u05e8\u05d4 \u05d1",r.foodCity)))}}]),a}(K),qe=a(37),Pe=a.n(qe),Re=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={user:{data:{},food:[],favorites:[]},favsToDelete:[],showFavs:!1},e.requestFavorites=Object(h.a)(p.a.mark((function t(){var a,r,n,o,s,c;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.user,e.toggleShowFavs(),!(null===(a=r.favorites[0])||void 0===a?void 0:a._id)){t.next=4;break}return t.abrupt("return");case 4:n=[],o=Object(W.a)(r.favorites),t.prev=6,o.s();case 8:if((s=o.n()).done){t.next=17;break}return c=s.value,t.t0=n,t.next=13,he(c);case 13:t.t1=t.sent.data[0],t.t0.push.call(t.t0,t.t1);case 15:t.next=8;break;case 17:t.next=22;break;case 19:t.prev=19,t.t2=t.catch(6),o.e(t.t2);case 22:return t.prev=22,o.f(),t.finish(22);case 25:return n.forEach((function(e){e.foodImage=y.b+e.foodImage.slice(8)})),r.favorites=n,t.next=29,Promise.all(r.favorites.map(function(){var e=Object(h.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t.user_id);case 3:t.user=e.sent,""===t.user&&(t.user={_id:t.user_id,name:"\u05dc\u05d0 \u05e0\u05de\u05e6\u05d0 \u05de\u05e9\u05ea\u05de\u05e9",phone:"",email:""}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()));case 29:e.setState({user:r});case 30:case"end":return t.stop()}}),t,null,[[6,19,22,25]])}))),e.registerFavorites=function(t){var a=e.state.favsToDelete;a.includes(t)?a.splice(a.indexOf(t),1):a.push(t),console.log(a),e.setState({favsToDelete:a})},e.deleteFavorites=Object(h.a)(p.a.mark((function t(){var a,r,n,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.favsToDelete,n=a.user,t.next=3,T(r);case 3:(o=t.sent)?o.status>=400?d.b.error(o.data):"object"===typeof o.data&&(d.b.success("\u05d4\u05e4\u05e8\u05d9\u05d8\u05d9\u05dd \u05d4\u05d5\u05e1\u05e8\u05d5 \u05d1\u05d4\u05e6\u05dc\u05d7\u05d4"),r=[],n.favorites=o.data):d.b.error("\u05d0\u05e8\u05e2\u05d4 \u05ea\u05e7\u05dc\u05d4 \u05d1\u05e9\u05dc\u05d9\u05d7\u05d4"),e.setState({user:n,favsToDelete:r});case 6:case"end":return t.stop()}}),t)}))),e.getUserWithFood=Object(h.a)(p.a.mark((function t(){var a,r,n,o,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.user,t.prev=1,t.next=4,k();case 4:if(!(n=t.sent)._id){t.next=17;break}return t.prev=6,t.next=9,j(n._id);case 9:a=t.sent,t.next=15;break;case 12:t.prev=12,t.t0=t.catch(6),Ue.a.fire({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",text:t.t0.message,icon:"error"});case 15:t.next=23;break;case 17:if(!n.message||!n.message.startsWith("Invalid token")){t.next=22;break}return Ue.a.fire({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",text:"\u05d9\u05e9 \u05dc\u05d4\u05ea\u05d7\u05d1\u05e8 \u05dc\u05de\u05e2\u05e8\u05db\u05ea",icon:"error",footer:"<a href='/user/login' style='text-decoration: none; font-weight: bold; padding: 0.5rem 1rem; border-radius: 10px; border: 1px solid #551A8B'>\u05d4\u05ea\u05d7\u05d1\u05e8\u05d5\u05ea \u05dc\u05de\u05e2\u05e8\u05db\u05ea</a>"}).then((function(t){t.value&&e.props.history.replace("/")})),t.abrupt("return");case 22:n.message&&Ue.a.fire({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",text:n.message,icon:"error"});case 23:return t.prev=23,t.next=26,be(n._id);case 26:o=t.sent,s=o.data,r=s,t.next=34;break;case 31:t.prev=31,t.t1=t.catch(23),Ue.a.fire({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",text:t.t1.message,icon:"error"});case 34:a.food=r,a.data=n,t.next=41;break;case 38:t.prev=38,t.t2=t.catch(1),Ue.a.fire({title:"\u05e9\u05d2\u05d9\u05d0\u05d4",text:t.t2.message,icon:"error"});case 41:e.setState({user:a});case 42:case"end":return t.stop()}}),t,null,[[1,38],[6,12],[23,31]])}))),e.renderFoodRows=function(){var t=e.state.user;return n.a.createElement(n.a.Fragment,null,n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"3"},"\u05d4\u05d0\u05d5\u05db\u05dc \u05e9\u05e4\u05e8\u05e1\u05de\u05ea:")),t.food.length&&t.food.map((function(e){return n.a.createElement("tr",{key:e._id},n.a.createElement("td",{colSpan:"3"},n.a.createElement($,{to:"/food/".concat(e._id),text:e.foodTitle,color:"green"})))})))},e.componentDidMount=function(){e.getUserWithFood()},e}return Object(l.a)(a,[{key:"toggleShowFavs",value:function(){var e=this.state.showFavs;this.setState({showFavs:!e})}},{key:"renderFavorites",value:function(){var e=this;return this.state.user.favorites.map((function(t){return n.a.createElement(He,{key:t._id,listing:t,registerFavorites:e.registerFavorites})}))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.favsToDelete,r=e.showFavs;return n.a.createElement("div",{className:Pe.a.viewUser},n.a.createElement("header",{className:Pe.a.pageHeader},n.a.createElement("h1",{className:Pe.a.headerText},"\u05e4\u05e8\u05d8\u05d9 \u05de\u05e9\u05ea\u05de\u05e9")),n.a.createElement("table",{className:Pe.a.table},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"\u05e9\u05dd \u05de\u05e9\u05ea\u05de\u05e9"),n.a.createElement("th",null,"\u05d0\u05d9\u05de\u05d9\u05d9\u05dc"),n.a.createElement("th",null,"\u05d8\u05dc\u05e4\u05d5\u05df"))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,t.name),n.a.createElement("td",null,t.email),n.a.createElement("td",null,t.phone)),t.food.length?this.renderFoodRows():n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"3"},n.a.createElement($,{to:"/food/add",color:"green",text:"\u05e8\u05d5\u05e6\u05d4 \u05dc\u05e9\u05ea\u05e3 \u05d0\u05d5\u05db\u05dc?"}))),n.a.createElement("tr",null,n.a.createElement("td",{id:"favorites-td",colSpan:"3"},n.a.createElement("span",{className:"button green",onClick:this.requestFavorites},"\u05dc\u05e6\u05e4\u05d9\u05d9\u05d4 \u05d1\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd \u05e9\u05dc\u05da"))),n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"3"},n.a.createElement("table",null,n.a.createElement("tbody",null,t.favorites.length>0&&t.favorites[0]._id&&r&&this.renderFavorites())))),a.length>0&&n.a.createElement("tr",null,n.a.createElement("td",{colSpan:"4"},n.a.createElement("span",{onClick:this.deleteFavorites,className:"button red"},"\u05dc\u05d4\u05e1\u05e8\u05d4 \u05de\u05e8\u05e9\u05d9\u05de\u05ea \u05d4\u05de\u05d5\u05e2\u05d3\u05e4\u05d9\u05dd"))))))}}]),a}(r.Component),ze=a(24),Je=a.n(ze),Ge=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];return(e=t.call.apply(t,[this].concat(o))).state={foodId:window.location.pathname.slice(6),foodData:{},buttonsWidth:"auto"},e.logState=function(){console.dir(e.state)},e.promptDelete=function(){var t=e.state.foodData;Ue.a.fire({title:"\u05de\u05d7\u05d9\u05e7\u05d4",text:'\u05dc\u05d7\u05d9\u05e6\u05d4 \u05e2\u05dc "\u05de\u05d7\u05e7" \u05ea\u05de\u05d7\u05e7 \u05d0\u05ea \u05d4\u05d0\u05d5\u05db\u05dc '.concat(t.foodTitle," \u05de").concat(t.foodCity),icon:"warning",showCancelButton:!0,confirmButtonColor:"#b93e15",cancelButtonColor:"#64a417",confirmButtonText:"\u05de\u05d7\u05e7",cancelButtonText:"\u05d1\u05d9\u05d8\u05d5\u05dc",reverseButtons:!0}).then((function(a){if(a.value)try{fe(t._id),Ue.a.fire({title:"\u05e0\u05de\u05d7\u05e7!",text:"\u05d4\u05e8\u05e9\u05d5\u05de\u05d4 \u05e0\u05de\u05d7\u05e7\u05d4 \u05d4\u05e6\u05dc\u05d7\u05d4",icon:"success"}),e.props.history.replace("/user/me")}catch(r){console.log(r.message)}}))},e.getfoodData=Object(h.a)(p.a.mark((function t(){var a,r,n,o;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state,r=a.foodData,n=a.foodId,t.prev=1,t.next=4,he(n);case 4:o=t.sent,r=o.data[0],t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0.message);case 11:r.foodImage=y.b+r.foodImage.slice(8),e.setState({foodData:r});case 13:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.renderFoodDataTable=function(){var t=e.state.foodData;return n.a.createElement(n.a.Fragment,null,n.a.createElement("table",{className:Je.a.table},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{colSpan:"2"},t.foodTitle))),n.a.createElement("tbody",null,n.a.createElement("tr",null,n.a.createElement("td",null,"\u05ea\u05d9\u05d0\u05d5\u05e8"),n.a.createElement("td",null,t.foodDesc)),n.a.createElement("tr",null,n.a.createElement("td",null,"\u05ea\u05de\u05d5\u05e0\u05d4"),n.a.createElement("td",{className:Je.a.imgTd},n.a.createElement("img",{src:t.foodImage,alt:t.foodTitle,height:"150",onClick:function(){Ue.a.fire({text:t.foodTitle,imageUrl:t.foodImage})}}))),n.a.createElement("tr",null,n.a.createElement("td",null,"\u05e2\u05d9\u05e8"),n.a.createElement("td",null,t.foodCity)))),n.a.createElement("div",{className:Je.a.formButtons},n.a.createElement($,{to:{pathname:"/food/edit",state:{foodId:t._id}},text:"\u05e2\u05e8\u05d9\u05db\u05d4",color:"mustard"}),n.a.createElement("span",{onClick:e.promptDelete,className:"button red"},"\u05de\u05d7\u05d9\u05e7\u05d4")))},e.renderNoFoodFound=function(){return n.a.createElement("div",{className:Je.a.noFood},n.a.createElement("h2",null,"\u05de\u05e6\u05d8\u05e2\u05e8\u05d9\u05dd, \u05dc\u05d0 \u05de\u05e6\u05d0\u05e0\u05d5 \u05db\u05d0\u05df \u05e9\u05d5\u05dd \u05d0\u05d5\u05db\u05dc"),n.a.createElement($,{to:"/",text:"\u05d7\u05d6\u05e8\u05d4 \u05dc\u05de\u05e1\u05da \u05d4\u05d1\u05d9\u05ea",color:"green"}))},e.componentDidMount=function(){e.getfoodData()},e}return Object(l.a)(a,[{key:"componentDidUpdate",value:function(){var e=this.state.buttonsWidth;this.buttonsDiv||(this.buttonsDiv=document.getElementsByClassName(Je.a.formButtons).item(0)),"auto"===e&&this.buttonsDiv&&(e=this.buttonsDiv.offsetWidth,this.setState({buttonsWidth:e}))}},{key:"render",value:function(){var e;return n.a.createElement("div",{className:Je.a.viewFood},n.a.createElement("header",{className:Je.a.pageHeader},n.a.createElement("h1",{className:Je.a.headerText},"\u05e4\u05e8\u05d8\u05d9 \u05de\u05d6\u05d5\u05df")),(null===(e=this.state.foodData)||void 0===e?void 0:e._id)?this.renderFoodDataTable():this.renderNoFoodFound(),n.a.createElement($,{to:"/user/me",text:"\u05d7\u05d6\u05e8\u05d4 \u05dc\u05e4\u05e8\u05d5\u05e4\u05d9\u05dc \u05e9\u05dc\u05d9",color:"green",style:{width:this.state.buttonsWidth}}))}}]),a}(r.Component),Ke=a(42),Ye=a.n(Ke),$e=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={data:{foodTitle:"",foodDesc:"",foodCity:""},errors:{},cities:{},form:null,foodId:null},e.schema={foodTitle:z.a.string().required().min(2).max(255).label("Food Title").error((function(){return{message:"\u05e9\u05e0\u05d9 \u05ea\u05d5\u05d9\u05dd \u05dc\u05e4\u05d7\u05d5\u05ea"}})),foodDesc:z.a.string().required().min(2).max(1024).label("Food Description").error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d4\u05d6\u05d9\u05df \u05ea\u05d9\u05d0\u05d5\u05e8 "}})),foodCity:z.a.string().required().min(2).max(255).label("Food City").error((function(){return{message:"\u05d9\u05e9 \u05dc\u05d1\u05d7\u05d5\u05e8 \u05e2\u05d9\u05e8"}})),foodImage:z.a.any()},e.logState=function(){console.dir(e.state)},e.getCities=Object(h.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_e();case 3:return t=e.sent,e.abrupt("return",{list:t,error:null});case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{list:null,error:e.t0.message});case 11:case"end":return e.stop()}}),e,null,[[0,7]])}))),e.getfoodData=Object(h.a)(p.a.mark((function t(){var a,r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.data,r=e.props.foodId,t.prev=2,t.next=5,he(r);case 5:n=t.sent,a=n.data[0],t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),console.log(t.t0.message);case 12:e.setState({data:a});case 13:case"end":return t.stop()}}),t,null,[[2,9]])}))),e.handleClear=function(){var t=e.state.data;t={foodTitle:" ",foodDesc:"",foodCity:""},e.setState({data:t})},e.promptDelete=function(){var t=e.state.data;Ue.a.fire({title:"\u05de\u05d7\u05d9\u05e7\u05d4",text:'\u05dc\u05d7\u05d9\u05e6\u05d4 \u05e2\u05dc "\u05de\u05d7\u05e7" \u05ea\u05de\u05d7\u05e7 \u05d0\u05ea \u05d4\u05d0\u05d5\u05db\u05dc '.concat(t.foodTitle," \u05de").concat(t.foodCity),icon:"warning",showCancelButton:!0,confirmButtonColor:"#b93e15",cancelButtonColor:"#64a417",confirmButtonText:"\u05de\u05d7\u05e7",cancelButtonText:"\u05d1\u05d9\u05d8\u05d5\u05dc",reverseButtons:!0}).then((function(a){if(a.value)try{fe(t._id),Ue.a.fire({title:"\u05e0\u05de\u05d7\u05e7!",text:"\u05d4\u05e8\u05e9\u05d5\u05de\u05d4 \u05e0\u05de\u05d7\u05e7\u05d4 \u05d4\u05e6\u05dc\u05d7\u05d4",icon:"success"}),e.props.history.replace("/user/me")}catch(r){console.log(r.message)}}))},e.doSubmit=Object(h.a)(p.a.mark((function t(){var a,r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.foodId,r=document.forms.namedItem("edit-food-form"),console.log(r),t.prev=3,t.next=6,pe(a,r);case 6:200===(n=t.sent).status?(d.b.success("\u05ea\u05d5\u05d3\u05d4 \u05e2\u05dc \u05d4\u05e9\u05d9\u05ea\u05d5\u05e3!"),e.props.history.push("/user/me")):d.b.error(n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),d.b.error(t.t0.message);case 13:case"end":return t.stop()}}),t,null,[[3,10]])}))),e.componentDidMount=Object(h.a)(p.a.mark((function t(){var a,r,n,o,s,c,l,i,u,m;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.foodId,r=null===(a=e.props.location.state)||void 0===a?void 0:a.foodId){t.next=6;break}e.props.history.push("/"),t.next=20;break;case 6:return n=e.state,o=n.cities,s=n.form,c=n.data,s=document.getElementById("edit-food-form"),console.log(s),t.next=11,e.getCities();case 11:return l=t.sent,i=l.list,u=l.error,i?o=i:d.b.error(u),t.next=17,he(r);case 17:m=t.sent,c=me.a.pick(m.data[0],["foodTitle","foodDesc","foodCity"]),e.setState({foodId:r,cities:o,form:s,data:c});case 20:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(a,[{key:"render",value:function(){var e,t=this.state,a=t.cities,r=t.foodId;return n.a.createElement("div",{className:Ye.a.editFood},this.state.data.foodTitle?n.a.createElement("div",{className:Ye.a.form},n.a.createElement("h3",null,"\u05e2\u05e8\u05d9\u05db\u05ea \u05e8\u05e9\u05d5\u05de\u05d4"),n.a.createElement("form",{id:"edit-food-form",name:"edit-food-form",onSubmit:this.handleSubmit,action:"",method:"POST",autoComplete:"off",encType:"multipart/form-data"},this.renderInput("foodTitle","* \u05e9\u05dd \u05d4\u05d0\u05d5\u05db\u05dc:"),this.renderTextArea("foodDesc","* \u05ea\u05d9\u05d0\u05d5\u05e8 \u05d4\u05d0\u05d5\u05db\u05dc:","edit-food-form","5"),this.renderUpload("foodImage","\u05e8\u05d5\u05e6\u05d4 \u05dc\u05e6\u05e8\u05e3 \u05ea\u05de\u05d5\u05e0\u05d4?","image/*"),(null===(e=a.names)||void 0===e?void 0:e.length)?this.renderDatalist("foodCity","cities","* \u05d1\u05d0\u05d9\u05d6\u05d5 \u05e2\u05d9\u05e8?",a.names):this.renderInput("foodCity","* \u05d1\u05d0\u05d9\u05d6\u05d5 \u05e2\u05d9\u05e8?"),n.a.createElement("div",{className:Ye.a.formButtons},n.a.createElement("div",null,this.renderSubmitButton("\u05e2\u05d3\u05db\u05d5\u05df","submit button green"),n.a.createElement("span",{onClick:this.handleClear,className:"button mustard"},"\u05e0\u05d9\u05e7\u05d5\u05d9")),n.a.createElement("span",{style:{width:"6rem"},onClick:this.promptDelete,className:"button red"},"\u05de\u05d7\u05d9\u05e7\u05d4"))),n.a.createElement("div",null,n.a.createElement($,{to:"/food/".concat(r),text:"\u05d1\u05d9\u05d8\u05d5\u05dc",color:"mustard"}))):n.a.createElement("h2",null," \u05e2\u05de\u05d5\u05d3 \u05d1\u05d8\u05e2\u05d9\u05e0\u05d4..."))}}]),a}(K),Qe=Object(m.g)($e),Ve=function(){return n.a.createElement("div",null,n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("br",null),n.a.createElement("h1",null,"\u05dc\u05e6\u05e2\u05e8\u05e0\u05d5 \u05d4\u05e2\u05de\u05d5\u05d3 \u05e9\u05d7\u05d9\u05e4\u05e9\u05ea \u05dc\u05d0 \u05e0\u05de\u05e6\u05d0"),n.a.createElement("br",null),n.a.createElement(Y.b,{to:"/"},"\u05d1\u05d7\u05d6\u05e8\u05d4 \u05dc\u05d3\u05e3 \u05d4\u05d1\u05d9\u05ea"))},Xe=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){B.b.add(L.f,L.d,L.e,L.b,A.a);var e=I.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e=this.state.user;return n.a.createElement("div",{className:"app-container"},n.a.createElement(d.a,{pauseOnFocusLoss:!1,rtl:!0}),n.a.createElement(ce,{user:e}),n.a.createElement("main",null,n.a.createElement("div",{id:"content"},n.a.createElement(m.d,null,n.a.createElement(m.b,{path:"/",exact:!0,component:Fe}),n.a.createElement(m.b,{path:"/user/login",exact:!0,component:X}),n.a.createElement(m.b,{path:"/user/signup",exact:!0,component:ae}),n.a.createElement(m.b,{path:"/user/logout",exact:!0,component:Z}),n.a.createElement(H,{path:"/user/me",exact:!0,component:Re}),n.a.createElement(H,{path:"/food/edit",exact:!0,component:Qe}),n.a.createElement(H,{path:"/food/add",exact:!0,component:ye}),n.a.createElement(H,{path:"/food/search",exact:!0,component:We}),n.a.createElement(H,{path:"/food",component:Ge}),n.a.createElement(m.b,{path:"/",component:Ve})))),n.a.createElement("footer",null,n.a.createElement(re,null)))}}]),a}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(Y.a,null,n.a.createElement(Xe,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},11:function(e){e.exports=JSON.parse('{"a":"ec2-18-156-192-107.eu-central-1.compute.amazonaws.com/api","b":"ec2-18-156-192-107.eu-central-1.compute.amazonaws.com/"}')},16:function(e,t,a){e.exports={navbar:"navbar_navbar__2oX1h",topList:"navbar_topList__3byRM",collapseList:"navbar_collapseList__15c2O",navlink:"navbar_navlink__3lN0V",burger:"navbar_burger__1LDS2",topLeft:"navbar_topLeft__NU67S"}},24:function(e,t,a){e.exports={viewFood:"view-food_viewFood__2CdEO",pageHeader:"view-food_pageHeader__3DqS1",headerText:"view-food_headerText__2mjjz",formButtons:"view-food_formButtons__2haOZ",noFood:"view-food_noFood__3Pjuy",table:"view-food_table__3-jBk",imgTd:"view-food_imgTd__1Nb7D"}},26:function(e,t,a){e.exports={container:"homepage_container__1bjGC",pageHeader:"homepage_pageHeader__2BAWR",headerText:"homepage_headerText__2g-iK",content:"homepage_content__1KaNX",content__about:"homepage_content__about__JVM5g",content__addFood:"homepage_content__addFood__3hLnk"}},27:function(e,t,a){e.exports={recommendation:"recommendation_recommendation__8Ufk8",recommendation__link:"recommendation_recommendation__link__9i11D",recommendation__image:"recommendation_recommendation__image__2u5yw",recommendation__text:"recommendation_recommendation__text__3kDR0",recommendation__desc:"recommendation_recommendation__desc__3P798"}},28:function(e,t,a){e.exports={viewFood:"find-food_viewFood__2EbGs",pageHeader:"find-food_pageHeader__N9kHU",headerText:"find-food_headerText__3Hn6U",form:"find-food_form__3zrKG",submit:"find-food_submit__1_inz",foodList:"find-food_foodList__124x2"}},37:function(e,t,a){e.exports={viewUser:"view-user_viewUser__1iIyQ",pageHeader:"view-user_pageHeader__3D2mS",headerText:"view-user_headerText__38-za",table:"view-user_table__2wmef"}},41:function(e,t,a){e.exports={addFood:"add-food_addFood__18TPw",form:"add-food_form__3C-WG",formButtons:"add-food_formButtons__F95Zs"}},42:function(e,t,a){e.exports={editFood:"edit-food_editFood__3Jk0l",form:"edit-food_form__aG4pH",formButtons:"edit-food_formButtons__rL_ce"}},46:function(e,t,a){e.exports={login:"login_login__2srCn",form:"login_form__3u_xx"}},47:function(e,t,a){e.exports={signup:"signup_signup__zMBnE",form:"signup_form__39A3J",button:"signup_button__2ASYt"}},48:function(e,t,a){e.exports={header:"find-food-table_header__3JIjN",table:"find-food-table_table__27p6o"}},62:function(e,t,a){e.exports=a.p+"static/media/homepage-header.29184fdc.jpg"},65:function(e,t,a){e.exports=a(100)},70:function(e,t,a){},71:function(e,t,a){},98:function(e,t,a){}},[[65,1,2]]]);
//# sourceMappingURL=main.d7928e4c.chunk.js.map